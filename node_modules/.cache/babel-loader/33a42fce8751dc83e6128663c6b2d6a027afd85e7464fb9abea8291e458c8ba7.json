{"ast":null,"code":"import _objectSpread from\"/Users/doandinhan/Documents/workspace/getDataSNKRDUNK/getdata/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/doandinhan/Documents/workspace/getDataSNKRDUNK/getdata/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/doandinhan/Documents/workspace/getDataSNKRDUNK/getdata/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{VND}from\"../changeCurrency/changeCurrency\";import{mergeData}from'../mergeData';import{getRateKor}from\"../rate\";import{instance}from\"../services\";export var getDataMenu=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(type,page){var response,rateKor,data,arrKor,i,result,_loop,_i,_ret;return _regeneratorRuntime().wrap(function _callee2$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return instance.get(\"https://www.soldout.co.kr/api/v3/search/get-item-list?&typeGb=goods&pageIndex=\".concat(page,\"&pageSize=12&keyword=\").concat(type));case 2:response=_context3.sent;_context3.next=5;return getRateKor();case 5:rateKor=_context3.sent;data=response.data.data.product_info.list.map(function(item){for(var i=0;i<item.model_no.length;i++){if(item.model_no[i]===' '||item.model_no[i]==='/'){item.model_no=item.model_no.slice(0,-item.model_no.length+i);}}return{code:item.model_no,type:item.brand_name_eng,min_priceSoldOut:VND.format(Math.floor(item.min_price*rateKor)),name:item.name_eng,img:item.image_path};});arrKor=[];i=0;case 9:if(!(i<data.length)){_context3.next=17;break;}_context3.next=12;return data[i];case 12:result=_context3.sent;arrKor.push(result);case 14:i++;_context3.next=9;break;case 17:_loop=/*#__PURE__*/_regeneratorRuntime().mark(function _loop(_i){var fetchData,_data;return _regeneratorRuntime().wrap(function _loop$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;// let isPriceSnkrDunkOk = false\n// let isSnkrDunkOk = false\n// let isHistorySnkrDunkOk = false\n// // let isHistoryKreamOk = false\n// // let isPriceKreamOk = false\n// let isKreamOk = false\n// const responseJP = await instance.get(`https://snkrdunk.com/v1/products/${arrKor[i].code}/sales-history?`)\n// const responseKream = await instanceKream.get(`https://kream.co.kr/api/p/tabs/all/?keyword=${arrKor[i].code}&request_key=59f3e93d-13b1-4df1-9690-558260cb6bc3`)\n// const historySnkrDunk  = await getSalesHistorySNKRDUNK(arrKor[i].code, '');\n// if(historySnkrDunk && historySnkrDunk.length>7) {\n//     isHistorySnkrDunkOk = true\n// }\n// const min_priceJp = (Math.floor(responseJP.data.minPrice*rateJp))\n// const min_priceKream = (Math.floor(responseKream.data.items[0].product.market.lowest_ask*rateKor))\n// if(min_priceJp-min_priceKream>=1000000) {\n//     isPriceSnkrDunkOk = true\n// } else if(min_priceKream-min_priceJp>=1000000) {\n//     // isPriceKreamOk = true\n// }\n// if(isHistorySnkrDunkOk && isPriceSnkrDunkOk) {\n//     isSnkrDunkOk = true\n// }\n// arrKor[i] = {\n//     ...arrKor[i],\n//     min_priceJp: VND.format(min_priceJp),\n//     min_priceKream: VND.format(min_priceKream),\n//     isSnkrDunkOk: isSnkrDunkOk,\n//     isKreamOk: isKreamOk\n// }\nfetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return mergeData(arrKor[_i].code);case 2:data=_context.sent;return _context.abrupt(\"return\",data);case 4:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();_context2.next=4;return fetchData();case 4:_data=_context2.sent;// data.price.forEach(\n//     (item) => {\n//         console.log(item)\n//         if(item.priceJp - item.priceKream > 1500000) {\n//             isPriceSnkrDunkOk = true\n//         }\n//     }\n// )\narrKor[_i]=_objectSpread(_objectSpread({},arrKor[_i]),{},{isSnkrDunkOk:_data.isSnkrDunkOk// min_priceJp: VND.format(min_priceJp),\n// min_priceKream: VND.format(min_priceKream),\n// isSnkrDunkOk: isSnkrDunkOk,\n// isKreamOk: isKreamOk\n});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);return _context2.abrupt(\"return\",{v:arrKor[_i]});case 11:case\"end\":return _context2.stop();}},_loop,null,[[0,8]]);});_i=0;case 19:if(!(_i<arrKor.length)){_context3.next=27;break;}return _context3.delegateYield(_loop(_i),\"t0\",21);case 21:_ret=_context3.t0;if(!(typeof _ret===\"object\")){_context3.next=24;break;}return _context3.abrupt(\"return\",_ret.v);case 24:_i++;_context3.next=19;break;case 27:return _context3.abrupt(\"return\",arrKor);case 28:case\"end\":return _context3.stop();}},_callee2);}));return function getDataMenu(_x,_x2){return _ref.apply(this,arguments);};}();","map":{"version":3,"names":["VND","mergeData","getRateKor","instance","getDataMenu","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","type","page","response","rateKor","data","arrKor","i","result","_loop","_i","_ret","wrap","_callee2$","_context3","prev","next","get","concat","sent","product_info","list","map","item","model_no","length","slice","code","brand_name_eng","min_priceSoldOut","format","Math","floor","min_price","name","name_eng","img","image_path","push","fetchData","_data","_loop$","_context2","_ref2","_callee","_callee$","_context","abrupt","stop","apply","arguments","_objectSpread","isSnkrDunkOk","t0","v","delegateYield","_x","_x2"],"sources":["/Users/doandinhan/Documents/workspace/getDataSNKRDUNK/getdata/src/DataMenu/getDataMenu.js"],"sourcesContent":["import { VND } from \"../changeCurrency/changeCurrency\";\nimport { mergeData } from '../mergeData';\nimport { getRateKor } from \"../rate\";\nimport { instance } from \"../services\";\n\nexport const getDataMenu = async (type, page) => {\n    const response = await instance.get(`https://www.soldout.co.kr/api/v3/search/get-item-list?&typeGb=goods&pageIndex=${page}&pageSize=12&keyword=${type}`)\n    const rateKor = await getRateKor();\n    const data = response.data.data.product_info.list.map(\n        (item) => {\n            for (let i = 0; i < item.model_no.length; i++) {\n                if (item.model_no[i] === ' ' || item.model_no[i] === '/') {\n                    item.model_no = item.model_no.slice(0, -item.model_no.length + i)\n                }\n            }\n\n            return {\n                code: item.model_no,\n                type: item.brand_name_eng,\n                min_priceSoldOut: VND.format(Math.floor(item.min_price*rateKor)),\n                name: item.name_eng,\n                img: item.image_path\n            }\n\n        }\n    )\n    const arrKor = []\n    for(let i = 0; i<data.length;i++) {\n        const result = await data[i]\n        arrKor.push(result)\n    }\n\n    for(let i=0; i<arrKor.length; i++) {\n        try {\n            // let isPriceSnkrDunkOk = false\n            // let isSnkrDunkOk = false\n            // let isHistorySnkrDunkOk = false\n            // // let isHistoryKreamOk = false\n            // // let isPriceKreamOk = false\n            // let isKreamOk = false\n            // const responseJP = await instance.get(`https://snkrdunk.com/v1/products/${arrKor[i].code}/sales-history?`)\n            // const responseKream = await instanceKream.get(`https://kream.co.kr/api/p/tabs/all/?keyword=${arrKor[i].code}&request_key=59f3e93d-13b1-4df1-9690-558260cb6bc3`)\n            // const historySnkrDunk  = await getSalesHistorySNKRDUNK(arrKor[i].code, '');\n            // if(historySnkrDunk && historySnkrDunk.length>7) {\n            //     isHistorySnkrDunkOk = true\n            // }\n            // const min_priceJp = (Math.floor(responseJP.data.minPrice*rateJp))\n            // const min_priceKream = (Math.floor(responseKream.data.items[0].product.market.lowest_ask*rateKor))\n            \n            // if(min_priceJp-min_priceKream>=1000000) {\n            //     isPriceSnkrDunkOk = true\n            // } else if(min_priceKream-min_priceJp>=1000000) {\n            //     // isPriceKreamOk = true\n            // }\n\n            // if(isHistorySnkrDunkOk && isPriceSnkrDunkOk) {\n            //     isSnkrDunkOk = true\n            // }\n            // arrKor[i] = {\n            //     ...arrKor[i],\n            //     min_priceJp: VND.format(min_priceJp),\n            //     min_priceKream: VND.format(min_priceKream),\n            //     isSnkrDunkOk: isSnkrDunkOk,\n            //     isKreamOk: isKreamOk\n            // }\n            const fetchData = async () => {\n                const data = await mergeData(arrKor[i].code);\n                return data\n            }\n            const data = await fetchData()\n            // data.price.forEach(\n            //     (item) => {\n            //         console.log(item)\n            //         if(item.priceJp - item.priceKream > 1500000) {\n            //             isPriceSnkrDunkOk = true\n            //         }\n            //     }\n            // )\n            arrKor[i] = {\n                ...arrKor[i],\n                isSnkrDunkOk: data.isSnkrDunkOk\n                // min_priceJp: VND.format(min_priceJp),\n                // min_priceKream: VND.format(min_priceKream),\n                // isSnkrDunkOk: isSnkrDunkOk,\n                // isKreamOk: isKreamOk\n            }\n        } catch(msg) {\n            return arrKor[i]\n        }\n    }\n    // if(filter) {\n    //     arrKor.forEach(\n    //         (item, index) => {\n    //             if(item.isSnkrDunkOk === false) {\n    //                 // console.log(index)\n    //                 arrKor[index] = []\n    //                 // arrKor.splice(index, 1)\n    //                 // console.log(arrKor.length)\n    //                 // console.log(arrKor)\n    //             }\n    //         }\n    //     )\n    // }\n    return arrKor\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}