{"ast":null,"code":"import { VND } from \"../changeCurrency/changeCurrency\";\nimport { mergeData } from '../mergeData';\nimport { getRateKor } from \"../rate\";\nimport { instance } from \"../services\";\nexport const getDataMenu = async (type, page) => {\n  const response = await instance.get(`https://www.soldout.co.kr/api/v3/search/get-item-list?&typeGb=goods&pageIndex=${page}&pageSize=12&keyword=${type}`);\n  const rateKor = await getRateKor();\n  const data = response.data.data.product_info.list.map(item => {\n    for (let i = 0; i < item.model_no.length; i++) {\n      if (item.model_no[i] === ' ' || item.model_no[i] === '/') {\n        item.model_no = item.model_no.slice(0, -item.model_no.length + i);\n      }\n    }\n    return {\n      code: item.model_no,\n      type: item.brand_name_eng,\n      min_priceSoldOut: VND.format(Math.floor(item.min_price * rateKor)),\n      name: item.name_eng,\n      img: item.image_path\n    };\n  });\n  const arrKor = [];\n  for (let i = 0; i < data.length; i++) {\n    const result = await data[i];\n    arrKor.push(result);\n  }\n  for (let i = 0; i < arrKor.length; i++) {\n    try {\n      // let isPriceSnkrDunkOk = false\n      // let isSnkrDunkOk = false\n      // let isHistorySnkrDunkOk = false\n      // // let isHistoryKreamOk = false\n      // // let isPriceKreamOk = false\n      // let isKreamOk = false\n      // const responseJP = await instance.get(`https://snkrdunk.com/v1/products/${arrKor[i].code}/sales-history?`)\n      // const responseKream = await instanceKream.get(`https://kream.co.kr/api/p/tabs/all/?keyword=${arrKor[i].code}&request_key=59f3e93d-13b1-4df1-9690-558260cb6bc3`)\n      // const historySnkrDunk  = await getSalesHistorySNKRDUNK(arrKor[i].code, '');\n      // if(historySnkrDunk && historySnkrDunk.length>7) {\n      //     isHistorySnkrDunkOk = true\n      // }\n      // const min_priceJp = (Math.floor(responseJP.data.minPrice*rateJp))\n      // const min_priceKream = (Math.floor(responseKream.data.items[0].product.market.lowest_ask*rateKor))\n\n      // if(min_priceJp-min_priceKream>=1000000) {\n      //     isPriceSnkrDunkOk = true\n      // } else if(min_priceKream-min_priceJp>=1000000) {\n      //     // isPriceKreamOk = true\n      // }\n\n      // if(isHistorySnkrDunkOk && isPriceSnkrDunkOk) {\n      //     isSnkrDunkOk = true\n      // }\n      // arrKor[i] = {\n      //     ...arrKor[i],\n      //     min_priceJp: VND.format(min_priceJp),\n      //     min_priceKream: VND.format(min_priceKream),\n      //     isSnkrDunkOk: isSnkrDunkOk,\n      //     isKreamOk: isKreamOk\n      // }\n      const fetchData = async () => {\n        const data = await mergeData(arrKor[i].code);\n        return data;\n      };\n      const data = await fetchData();\n      // data.price.forEach(\n      //     (item) => {\n      //         console.log(item)\n      //         if(item.priceJp - item.priceKream > 1500000) {\n      //             isPriceSnkrDunkOk = true\n      //         }\n      //     }\n      // )\n      arrKor[i] = {\n        ...arrKor[i],\n        isSnkrDunkOk: data.isSnkrDunkOk\n        // min_priceJp: VND.format(min_priceJp),\n        // min_priceKream: VND.format(min_priceKream),\n        // isSnkrDunkOk: isSnkrDunkOk,\n        // isKreamOk: isKreamOk\n      };\n    } catch (msg) {\n      return arrKor[i];\n    }\n  }\n  // if(filter) {\n  //     arrKor.forEach(\n  //         (item, index) => {\n  //             if(item.isSnkrDunkOk === false) {\n  //                 // console.log(index)\n  //                 arrKor[index] = []\n  //                 // arrKor.splice(index, 1)\n  //                 // console.log(arrKor.length)\n  //                 // console.log(arrKor)\n  //             }\n  //         }\n  //     )\n  // }\n  return arrKor;\n};","map":{"version":3,"names":["VND","mergeData","getRateKor","instance","getDataMenu","type","page","response","get","rateKor","data","product_info","list","map","item","i","model_no","length","slice","code","brand_name_eng","min_priceSoldOut","format","Math","floor","min_price","name","name_eng","img","image_path","arrKor","result","push","fetchData","isSnkrDunkOk","msg"],"sources":["C:/Users/admin/Desktop/an/sneaker/src/DataMenu/getDataMenu.js"],"sourcesContent":["import { VND } from \"../changeCurrency/changeCurrency\";\r\nimport { mergeData } from '../mergeData';\r\nimport { getRateKor } from \"../rate\";\r\nimport { instance } from \"../services\";\r\n\r\nexport const getDataMenu = async (type, page) => {\r\n    const response = await instance.get(`https://www.soldout.co.kr/api/v3/search/get-item-list?&typeGb=goods&pageIndex=${page}&pageSize=12&keyword=${type}`)\r\n    const rateKor = await getRateKor();\r\n    const data = response.data.data.product_info.list.map(\r\n        (item) => {\r\n            for (let i = 0; i < item.model_no.length; i++) {\r\n                if (item.model_no[i] === ' ' || item.model_no[i] === '/') {\r\n                    item.model_no = item.model_no.slice(0, -item.model_no.length + i)\r\n                }\r\n            }\r\n\r\n            return {\r\n                code: item.model_no,\r\n                type: item.brand_name_eng,\r\n                min_priceSoldOut: VND.format(Math.floor(item.min_price*rateKor)),\r\n                name: item.name_eng,\r\n                img: item.image_path\r\n            }\r\n\r\n        }\r\n    )\r\n    const arrKor = []\r\n    for(let i = 0; i<data.length;i++) {\r\n        const result = await data[i]\r\n        arrKor.push(result)\r\n    }\r\n\r\n    for(let i=0; i<arrKor.length; i++) {\r\n        try {\r\n            // let isPriceSnkrDunkOk = false\r\n            // let isSnkrDunkOk = false\r\n            // let isHistorySnkrDunkOk = false\r\n            // // let isHistoryKreamOk = false\r\n            // // let isPriceKreamOk = false\r\n            // let isKreamOk = false\r\n            // const responseJP = await instance.get(`https://snkrdunk.com/v1/products/${arrKor[i].code}/sales-history?`)\r\n            // const responseKream = await instanceKream.get(`https://kream.co.kr/api/p/tabs/all/?keyword=${arrKor[i].code}&request_key=59f3e93d-13b1-4df1-9690-558260cb6bc3`)\r\n            // const historySnkrDunk  = await getSalesHistorySNKRDUNK(arrKor[i].code, '');\r\n            // if(historySnkrDunk && historySnkrDunk.length>7) {\r\n            //     isHistorySnkrDunkOk = true\r\n            // }\r\n            // const min_priceJp = (Math.floor(responseJP.data.minPrice*rateJp))\r\n            // const min_priceKream = (Math.floor(responseKream.data.items[0].product.market.lowest_ask*rateKor))\r\n            \r\n            // if(min_priceJp-min_priceKream>=1000000) {\r\n            //     isPriceSnkrDunkOk = true\r\n            // } else if(min_priceKream-min_priceJp>=1000000) {\r\n            //     // isPriceKreamOk = true\r\n            // }\r\n\r\n            // if(isHistorySnkrDunkOk && isPriceSnkrDunkOk) {\r\n            //     isSnkrDunkOk = true\r\n            // }\r\n            // arrKor[i] = {\r\n            //     ...arrKor[i],\r\n            //     min_priceJp: VND.format(min_priceJp),\r\n            //     min_priceKream: VND.format(min_priceKream),\r\n            //     isSnkrDunkOk: isSnkrDunkOk,\r\n            //     isKreamOk: isKreamOk\r\n            // }\r\n            const fetchData = async () => {\r\n                const data = await mergeData(arrKor[i].code);\r\n                return data\r\n            }\r\n            const data = await fetchData()\r\n            // data.price.forEach(\r\n            //     (item) => {\r\n            //         console.log(item)\r\n            //         if(item.priceJp - item.priceKream > 1500000) {\r\n            //             isPriceSnkrDunkOk = true\r\n            //         }\r\n            //     }\r\n            // )\r\n            arrKor[i] = {\r\n                ...arrKor[i],\r\n                isSnkrDunkOk: data.isSnkrDunkOk\r\n                // min_priceJp: VND.format(min_priceJp),\r\n                // min_priceKream: VND.format(min_priceKream),\r\n                // isSnkrDunkOk: isSnkrDunkOk,\r\n                // isKreamOk: isKreamOk\r\n            }\r\n        } catch(msg) {\r\n            return arrKor[i]\r\n        }\r\n    }\r\n    // if(filter) {\r\n    //     arrKor.forEach(\r\n    //         (item, index) => {\r\n    //             if(item.isSnkrDunkOk === false) {\r\n    //                 // console.log(index)\r\n    //                 arrKor[index] = []\r\n    //                 // arrKor.splice(index, 1)\r\n    //                 // console.log(arrKor.length)\r\n    //                 // console.log(arrKor)\r\n    //             }\r\n    //         }\r\n    //     )\r\n    // }\r\n    return arrKor\r\n}"],"mappings":"AAAA,SAASA,GAAG,QAAQ,kCAAkC;AACtD,SAASC,SAAS,QAAQ,cAAc;AACxC,SAASC,UAAU,QAAQ,SAAS;AACpC,SAASC,QAAQ,QAAQ,aAAa;AAEtC,OAAO,MAAMC,WAAW,GAAG,MAAAA,CAAOC,IAAI,EAAEC,IAAI,KAAK;EAC7C,MAAMC,QAAQ,GAAG,MAAMJ,QAAQ,CAACK,GAAG,CAAE,iFAAgFF,IAAK,wBAAuBD,IAAK,EAAC,CAAC;EACxJ,MAAMI,OAAO,GAAG,MAAMP,UAAU,CAAC,CAAC;EAClC,MAAMQ,IAAI,GAAGH,QAAQ,CAACG,IAAI,CAACA,IAAI,CAACC,YAAY,CAACC,IAAI,CAACC,GAAG,CAChDC,IAAI,IAAK;IACN,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,IAAI,CAACE,QAAQ,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;MAC3C,IAAID,IAAI,CAACE,QAAQ,CAACD,CAAC,CAAC,KAAK,GAAG,IAAID,IAAI,CAACE,QAAQ,CAACD,CAAC,CAAC,KAAK,GAAG,EAAE;QACtDD,IAAI,CAACE,QAAQ,GAAGF,IAAI,CAACE,QAAQ,CAACE,KAAK,CAAC,CAAC,EAAE,CAACJ,IAAI,CAACE,QAAQ,CAACC,MAAM,GAAGF,CAAC,CAAC;MACrE;IACJ;IAEA,OAAO;MACHI,IAAI,EAAEL,IAAI,CAACE,QAAQ;MACnBX,IAAI,EAAES,IAAI,CAACM,cAAc;MACzBC,gBAAgB,EAAErB,GAAG,CAACsB,MAAM,CAACC,IAAI,CAACC,KAAK,CAACV,IAAI,CAACW,SAAS,GAAChB,OAAO,CAAC,CAAC;MAChEiB,IAAI,EAAEZ,IAAI,CAACa,QAAQ;MACnBC,GAAG,EAAEd,IAAI,CAACe;IACd,CAAC;EAEL,CACJ,CAAC;EACD,MAAMC,MAAM,GAAG,EAAE;EACjB,KAAI,IAAIf,CAAC,GAAG,CAAC,EAAEA,CAAC,GAACL,IAAI,CAACO,MAAM,EAACF,CAAC,EAAE,EAAE;IAC9B,MAAMgB,MAAM,GAAG,MAAMrB,IAAI,CAACK,CAAC,CAAC;IAC5Be,MAAM,CAACE,IAAI,CAACD,MAAM,CAAC;EACvB;EAEA,KAAI,IAAIhB,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACe,MAAM,CAACb,MAAM,EAAEF,CAAC,EAAE,EAAE;IAC/B,IAAI;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,MAAMkB,SAAS,GAAG,MAAAA,CAAA,KAAY;QAC1B,MAAMvB,IAAI,GAAG,MAAMT,SAAS,CAAC6B,MAAM,CAACf,CAAC,CAAC,CAACI,IAAI,CAAC;QAC5C,OAAOT,IAAI;MACf,CAAC;MACD,MAAMA,IAAI,GAAG,MAAMuB,SAAS,CAAC,CAAC;MAC9B;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAH,MAAM,CAACf,CAAC,CAAC,GAAG;QACR,GAAGe,MAAM,CAACf,CAAC,CAAC;QACZmB,YAAY,EAAExB,IAAI,CAACwB;QACnB;QACA;QACA;QACA;MACJ,CAAC;IACL,CAAC,CAAC,OAAMC,GAAG,EAAE;MACT,OAAOL,MAAM,CAACf,CAAC,CAAC;IACpB;EACJ;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,OAAOe,MAAM;AACjB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}